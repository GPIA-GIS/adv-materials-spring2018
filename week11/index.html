<!DOCTYPE html>
<html>
    <head>
        <title>Class 11 | Advanced GIS</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />

        <link href='https://fonts.googleapis.com/css?family=Arvo|Alegreya+Sans' rel='stylesheet' type='text/css'>

        <link href="../css/pig.css" rel="stylesheet" type="text/css" />
        <link href="../css/base.css" rel="stylesheet" />

        <script src="../js/pig.js"></script>
    </head>
    <body>

        <div class="slide">
            <p>Welcome to Advanced GIS, Lecture 11</p>
            <p>This is a web page that can be viewed as slides.</p>
            <p>→ to move forward</p>
            <p>← to go back</p>
        </div>

        <div class="slide">
            <h1>Advanced GIS</h1>
            <p>Class 11</p>
        </div>

        <div class="slide" style="background-image: url(img/dbird.png);">
            <a href="https://www.d-bird.org/" class="source">source</a>
        </div>

        <div class="slide" style="background-image: url(img/map-form.png);">
            <a href="https://glitch.com/edit/#!/walnut-prosecution?path=styles.css:6:0" class="source">source</a>
        </div>

        <div class="slide intermission"></div>

        <div class="slide" style="background-image: url(img/carto-location-click.png);">
            <a href="https://glitch.com/edit/#!/carto-location-click" class="source">source</a>
        </div>

        <div class="slide" style="background-image: url(img/carto-spatial-sql.png);">
        </div>

        <div class="slide" style="background-image: url(img/carto-spatial-sql.png);">
            <pre style="background: rgba(255, 255, 255, 0.8);"><code>SELECT *
FROM nypd_motor_vehicle_collisions
WHERE ST_Within(
  ST_Transform(the_geom, 2263),
  ST_Buffer(
    ST_Transform(CDB_LatLng(40.732, -73.986), 2263),
    10000
  )
)</code></pre>
        </div>

        <div class="slide" style="background-image: url(img/carto-spatial-sql.png);">
            <pre style="background: rgba(255, 255, 255, 0.8);"><code>SELECT *
FROM nypd_motor_vehicle_collisions</code></pre>
        </div>

        <div class="slide" style="background-image: url(img/carto-spatial-sql.png);">
            <pre style="background: rgba(255, 255, 255, 0.8);"><code>SELECT *
FROM nypd_motor_vehicle_collisions
WHERE ST_Within(
  <strong>smaller geometry</strong>,
  <strong>larger geometry</strong>
)</code></pre>
        </div>

        <div class="slide" style="background-image: url(img/carto-spatial-sql.png);">
            <pre style="background: rgba(255, 255, 255, 0.8);"><code>SELECT *
FROM nypd_motor_vehicle_collisions
WHERE ST_Within(
  the_geom,
  <strong>larger geometry</strong>
)</code></pre>
        </div>

        <div class="slide" style="background-image: url(img/carto-spatial-sql.png);">
            <pre style="background: rgba(255, 255, 255, 0.8);"><code>SELECT *
FROM nypd_motor_vehicle_collisions
WHERE ST_Within(
  ST_Transform(the_geom, 2263),
  <strong>larger geometry</strong>
)</code></pre>
        </div>

        <div class="slide" style="background-image: url(img/carto-spatial-sql.png);">
            <pre style="background: rgba(255, 255, 255, 0.8);"><code>SELECT *
FROM nypd_motor_vehicle_collisions
WHERE ST_Within(
  ST_Transform(the_geom, 2263),
  ST_Buffer(
    <strong>input point</strong>,
    10000
  )
)</code></pre>
        </div>

        <div class="slide" style="background-image: url(img/carto-spatial-sql.png);">
            <pre style="background: rgba(255, 255, 255, 0.8);"><code>SELECT *
FROM nypd_motor_vehicle_collisions
WHERE ST_Within(
  ST_Transform(the_geom, 2263),
  ST_Buffer(
    CDB_LatLng(40.732, -73.986),
    10000
  )
)</code></pre>
        </div>

        <div class="slide" style="background-image: url(img/carto-spatial-sql.png);">
            <pre style="background: rgba(255, 255, 255, 0.8);"><code>SELECT *
FROM nypd_motor_vehicle_collisions
WHERE ST_Within(
  ST_Transform(the_geom, 2263),
  ST_Buffer(
    ST_Transform(CDB_LatLng(40.732, -73.986), 2263),
    10000
  )
)</code></pre>
        </div>

        <div class="slide" style="background-image: url(img/postgis.png);">
            <a href="http://postgis.refractions.net/docs/" class="source">source</a>
        </div>

        <div class="slide">
            <h2><a href="inclass.html" target="_blank">in-class exercise, part 1</a></h2>
        </div>

        <div class="slide">
            <h2>arrays</h2>
        </div>

        <div class="slide">
            <h2>arrays are lists of things</h2>
        </div>

        <div class="slide">
            <pre><code>var lifeStages = [
    'Neonate',
    'Juvenile',
    'Adult'
];</code></pre>
        </div>

        <div class="slide">
            <pre><code>var ratings = [
    5,
    3,
    4.5
];</code></pre>
        </div>

        <div class="slide">
            <pre><code>var lifeStages = [
    'Neonate',
    'Juvenile',
    'Adult'
];</code></pre>
        </div>

        <div class="slide">
            <pre><code>var lifeStages = [
    'Neonate',
    'Juvenile',
    'Adult'
];</code></pre>
            <code>lifeStages[0]</code> is 'Neonate'
        </div>

        <div class="slide">
            <pre><code>var lifeStages = [
    'Neonate',
    'Juvenile',
    'Adult'
];</code></pre>
            <code>lifeStages[1]</code> is 'Juvenile'
        </div>

        <div class="slide">
            <h2><a href="inclass.html" target="_blank">in-class exercise, part 2</a></h2>
        </div>

        <div class="slide">
            <h2>objects</h2>
        </div>

        <div class="slide">
            <h2>objects store structured data</h2>
        </div>

        <div class="slide">
            <pre><code>var coordinates = {
    latitude: 41.56,
    longitude: -73.29
};</code></pre>
        </div>

        <div class="slide">
            <h2>you can think of objects like dictionaries</h2>
        </div>

        <div class="slide">
            <pre><code>var coordinates = {
    latitude: 41.56,
    longitude: -73.29
};</code></pre>
            <code>coordinates.latitude</code> is 41.56
        </div>

        <div class="slide">
            <h2>sometimes with "" around field names</h2>
            <pre><code>var coordinates = {
    "latitude": 41.56,
    "longitude": -73.29
};</code></pre>
        </div>

        <div class="slide">
            <h2><a href="inclass.html" target="_blank">in-class exercise, part 3</a></h2>
        </div>

        <div class="slide">
            <h2>objects and arrays can be combined</h2>
        </div>

        <div class="slide">
            <pre><code>var data = {
    "rows": [
        {"count":208}
    ],
    "time":0.006,
    "fields": {
        "count": {"type":"number"}
    },
    "total_rows":1
};</code></pre>
        </div>

        <div class="slide">
            <pre style="font-size: 25px; line-height: 35px;"><code>var data = {
    "rows": [
        {"count":208}
    ],
    "time":0.006,
    "fields": {
        "count": {"type":"number"}
    },
    "total_rows":1
};</code></pre>
            <code>data.rows</code> is <pre><code>[
    {"count":208}
]</code></pre>
        </div>

        <div class="slide">
            <pre style="font-size: 25px; line-height: 35px;"><code>var data = {
    "rows": [
        {"count":208}
    ],
    "time":0.006,
    "fields": {
        "count": {"type":"number"}
    },
    "total_rows":1
};</code></pre>
            <code>data.rows[0]</code> is <code>{"count":208}</code>
        </div>

        <div class="slide">
            <pre style="font-size: 25px; line-height: 35px;"><code>var data = {
    "rows": [
        {"count":208}
    ],
    "time":0.006,
    "fields": {
        "count": {"type":"number"}
    },
    "total_rows":1
};</code></pre>
            <code>data.rows[0].count</code> is <code>208</code>
        </div>

        <div class="slide">
            <h2>getting data from Carto</h2>
        </div>

        <div class="slide">
            <h2>with JavaScript you can ask Carto for any data from your datasets</h2>
        </div>

        <div class="slide">
            <h2>this can be handy for showing summaries on a page</h2>
        </div>

        <div class="slide" style="background-image: url(img/carto-count.png);">
            <a href="https://glitch.com/edit/#!/marsh-sled" class="source">source</a>
        </div>

        <div class="slide" style="background-image: url(img/carto-spatial-sql-count.png);">
            <a href="https://glitch.com/edit/#!/carto-location-click2" class="source">source</a>
        </div>

        <div class="slide">
            <h2>or listing features</h2>
        </div>

        <div class="slide" style="background-image: url(img/berlin.png);">
            <a href="http://berlinfreespaces.org/" class="source">source</a>
        </div>

        <div class="slide">
            <h2>you do this by giving Carto the SQL, and it returns an object of data</h2>
        </div>

        <div class="slide">
            <pre><code>var data = {
    "rows": [
        {"count":208}
    ],
    "time":0.006,
    "fields": {
        "count": {"type":"number"}
    },
    "total_rows":1
};</code></pre>
        </div>

        <div class="slide" style="background-image: url(img/carto-sql-api.png);">
            <a href="https://carto.com/docs/carto-engine/sql-api/making-calls/" class="source">source</a>
        </div>

        <div class="slide intermission"></div>

        <div class="slide" style="background-image: url(img/citibike-0.png);">
            <a class="source" href="https://member.citibikenyc.com/map/">source</a>
        </div>

        <div class="slide" style="background-image: url(img/citibike-1.png);">
        </div>

        <div class="slide" style="background-image: url(img/habitatmap-0.png);">
            <a class="source" href="http://habitatmap.org/markers?colors=0&lat=40.688364&lng=-73.966838&maps=212&nogrp=1&t=terrain&z=10">source</a>
        </div>

        <div class="slide" style="background-image: url(img/habitatmap-1.png);">
        </div>

        <div class="slide" style="background-image: url(img/openrefine.png);">
            <a href="http://openrefine.org/" class="source">source</a>
        </div>

        <div class="slide" style="background-image: url(img/openrefine-json-0.png);">
        </div>

        <div class="slide" style="background-image: url(img/openrefine-json-1.png);">
        </div>

        <div class="slide" style="background-image: url(img/openrefine-json-2.png);">
        </div>

        <div class="slide" style="background-image: url(img/openrefine-json-3.png);">
        </div>

        <div class="slide" style="background-image: url(img/openrefine-json-4.png);">
        </div>

        <div class="slide" style="background-image: url(img/openrefine-json-5.png);">
        </div>

        <div class="slide" style="background-image: url(img/lpc.png);">
            <a href="https://nyclpc.maps.arcgis.com/apps/webappviewer/index.html?id=93a88691cace4067828b1eede432022b" class="source">source</a>
        </div>

        <div class="slide" style="background-image: url(img/lpc-devtools.png);">
            <a href="https://nyclpc.maps.arcgis.com/apps/webappviewer/index.html?id=93a88691cace4067828b1eede432022b" class="source">source</a>
        </div>

        <div class="slide" style="background-image: url(img/lpc-devtools-featureserver.png);">
        </div>

        <div class="slide" style="background-image: url(img/lpc-devtools-featureserver-2.png);">
        </div>

        <div class="slide" style="background-image: url(img/lpc-json.png);">
            <a href="https://services5.arcgis.com/Oos4pNA2538iVFA1/arcgis/rest/services/Historic_Buildings_Service/FeatureServer/0/query?f=json&returnGeometry=true&spatialRel=esriSpatialRelIntersects&geometry=%7B%22xmin%22%3A-8238077.160150832%2C%22ymin%22%3A4971464.319269167%2C%22xmax%22%3A-8236854.167698236%2C%22ymax%22%3A4972687.311721763%2C%22spatialReference%22%3A%7B%22wkid%22%3A102100%7D%7D&geometryType=esriGeometryEnvelope&inSR=102100&outFields=*&outSR=102100&resultType=tile&quantizationParameters=%7B%22mode%22%3A%22view%22%2C%22originPosition%22%3A%22upperLeft%22%2C%22tolerance%22%3A2.388657133974916%2C%22extent%22%3A%7B%22type%22%3A%22extent%22%2C%22xmin%22%3A945063.8598565905%2C%22ymin%22%3A153498.29672792554%2C%22xmax%22%3A1055172.691147667%2C%22ymax%22%3A268361.3645735018%2C%22spatialReference%22%3A%7B%22wkid%22%3A102718%2C%22latestWkid%22%3A2263%7D%7D%7D" class="source">source</a>
        </div>

        <div class="slide" style="background-image: url(img/lpc-featureserver.png);">
            <a href="https://services5.arcgis.com/Oos4pNA2538iVFA1/arcgis/rest/services/Historic_Buildings_Service/FeatureServer/" class="source">source</a>
        </div>

        <div class="slide" style="background-image: url(img/lpc-featureserver-services.png);">
            <a href="https://services5.arcgis.com/Oos4pNA2538iVFA1/ArcGIS/rest/services" class="source">source</a>
        </div>

    </body>
</html>
